<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rifa iPhone 17 Pro Max</title>
  <style>
    :root {
      --azul-oscuro: #020617;
      --azul: #1d4ed8;
      --azul-intermedio: #0f172a;
      --dorado: #fbbf24;
      --gris-fondo: #020617;
      --rojo: #ef4444;
      --verde: #22c55e;
      --texto-principal: #e5e7eb;
      --texto-secundario: #9ca3af;
      --borde-card: rgba(148, 163, 184, 0.24);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 45%, #000 100%);
      color: var(--texto-principal);
    }

    /* HEADER */
    header {
      background: linear-gradient(90deg, #020617, #0f172a, #111827);
      color: white;
      padding: 18px 20px 16px;
      text-align: center;
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(14px);
      background-color: rgba(2, 6, 23, 0.92);
    }

    header h1 {
      margin: 0;
      font-size: 1.6rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    header p {
      margin: 6px 0 0;
      font-size: 0.92rem;
      color: var(--texto-secundario);
    }

    /* LAYOUT GENERAL */
    main {
      max-width: 1120px;
      margin: 24px auto 40px;
      padding: 0 16px 40px;
    }

    .hero {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 28px;
      align-items: center;
      background: radial-gradient(circle at top left, #1f2937 0, #020617 55%);
      border-radius: 24px;
      padding: 26px 26px 22px;
      border: 1px solid var(--borde-card);
      box-shadow:
        0 22px 55px rgba(15, 23, 42, 0.75),
        0 0 0 1px rgba(15, 23, 42, 0.9);
      margin-bottom: 26px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(250, 204, 21, 0.12);
      color: var(--dorado);
      padding: 5px 12px;
      border-radius: 999px;
      font-size: 0.78rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .badge span {
      font-size: 0.9rem;
    }

    .hero h2 {
      margin: 12px 0 8px;
      font-size: 1.7rem;
      color: #e5e7eb;
    }

    .hero-subtitle {
      margin: 0 0 14px;
      color: var(--texto-secundario);
      font-size: 0.98rem;
      max-width: 30rem;
    }

    .price-highlight {
      font-size: 1.02rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .price-highlight span {
      color: var(--verde);
    }

    .details-list {
      list-style: none;
      padding: 0;
      margin: 0 0 18px;
      font-size: 0.9rem;
      color: var(--texto-secundario);
    }

    .details-list li {
      margin-bottom: 4px;
    }

    .details-list li::before {
      content: "‚Ä¢ ";
      color: var(--azul);
      font-weight: bold;
    }

    .cta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .btn-primary {
      background: radial-gradient(circle at top left, #facc15, #f97316);
      color: #111827;
      border: none;
      border-radius: 999px;
      padding: 10px 22px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      font-size: 0.95rem;
      box-shadow: 0 18px 40px rgba(251, 191, 36, 0.55);
      transition:
        transform 0.08s ease,
        box-shadow 0.12s ease,
        filter 0.1s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 22px 50px rgba(251, 191, 36, 0.75);
      filter: brightness(1.02);
    }

    .cta-note {
      font-size: 0.82rem;
      color: var(--texto-secundario);
      max-width: 260px;
    }

    .hero-img-wrapper {
      display: flex;
      justify-content: center;
    }

    .hero-img {
      max-width: 270px;
      border-radius: 26px;
      overflow: hidden;
      padding: 18px 18px 12px;
      background: radial-gradient(circle at top, #1d4ed8 0, #020617 60%);
      box-shadow:
        0 20px 50px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(37, 99, 235, 0.4);
      position: relative;
    }

    .hero-img::before {
      content: "Premio real";
      position: absolute;
      top: 10px;
      right: 14px;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.75);
      color: var(--texto-secundario);
      border: 1px solid rgba(148, 163, 184, 0.6);
      backdrop-filter: blur(4px);
    }

    .hero-img img {
      display: block;
      width: 100%;
      border-radius: 18px;
    }

    /* CARDS GENERALES */
    .card {
      background: radial-gradient(circle at top left, #020617, #020617);
      border-radius: 20px;
      padding: 18px 20px 16px;
      margin-bottom: 18px;
      border: 1px solid var(--borde-card);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.75);
    }

    .card h3 {
      margin-top: 0;
      font-size: 1.06rem;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card h3 span {
      font-size: 1.1rem;
    }

    .card p {
      margin: 6px 0;
      font-size: 0.9rem;
      color: var(--texto-secundario);
    }

    .card ul {
      margin: 8px 0;
      padding-left: 18px;
      font-size: 0.9rem;
      color: var(--texto-secundario);
    }

    .tag {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      background: rgba(148, 163, 184, 0.16);
      color: #e5e7eb;
      margin-left: 4px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    /* PROGRESO Y BOLETOS */
    .progress-wrapper {
      margin-top: 10px;
    }

    .progress-bar {
      width: 100%;
      height: 14px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      overflow: hidden;
      position: relative;
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .progress-fill {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #22c55e, #4ade80, #a3e635);
      transition: width 0.4s ease-out;
    }

    .progress-text {
      margin-top: 7px;
      font-size: 0.85rem;
      color: var(--texto-secundario);
    }

    .tickets-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(42px, 1fr));
      gap: 6px;
      margin-top: 14px;
    }

    .ticket {
      border-radius: 10px;
      padding: 6px 0;
      text-align: center;
      font-size: 0.84rem;
      cursor: pointer;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: #020617;
      color: #e5e7eb;
      transition:
        background 0.12s ease,
        transform 0.06s ease,
        box-shadow 0.1s ease,
        border-color 0.12s ease,
        color 0.12s ease;
    }

    .ticket:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.85);
      border-color: #2563eb;
    }

    .ticket.sold {
      background: rgba(239, 68, 68, 0.08);
      color: #fca5a5;
      border-color: rgba(248, 113, 113, 0.7);
      cursor: not-allowed;
      box-shadow: none;
    }

    .ticket.selected {
      background: rgba(37, 99, 235, 0.22);
      border-color: #60a5fa;
      color: #e5e7eb;
      font-weight: 600;
      box-shadow: 0 10px 24px rgba(37, 99, 235, 0.8);
    }

    .ticket-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 0.8rem;
      margin-top: 12px;
      color: var(--texto-secundario);
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .legend-box {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: #020617;
    }

    .legend-box.sold {
      background: rgba(239, 68, 68, 0.2);
      border-color: rgba(248, 113, 113, 0.85);
    }

    .legend-box.selected {
      background: rgba(37, 99, 235, 0.4);
      border-color: #60a5fa;
    }

    .good-luck {
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(22, 163, 74, 0.14);
      border: 1px solid rgba(74, 222, 128, 0.5);
      font-size: 0.88rem;
      color: #bbf7d0;
    }

    /* FORMULARIOS */
    .fields-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
      margin-top: 10px;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .field label {
      font-size: 0.84rem;
      font-weight: 600;
      color: #e5e7eb;
    }

    .field input {
      border-radius: 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 8px 10px;
      font-size: 0.9rem;
      outline: none;
      background: #020617;
      color: #e5e7eb;
    }

    .field input::placeholder {
      color: #6b7280;
    }

    .field input:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.6);
    }

    .small-note {
      font-size: 0.8rem;
      color: var(--texto-secundario);
      margin-top: 8px;
    }

    .verifier-form {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .verifier-form input {
      flex: 1;
      min-width: 190px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 8px 12px;
      font-size: 0.9rem;
      background: #020617;
      color: #e5e7eb;
    }

    .verifier-form input::placeholder {
      color: #6b7280;
    }

    .btn-secondary {
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: transparent;
      color: #e5e7eb;
      padding: 8px 16px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition:
        background 0.1s ease,
        color 0.1s ease,
        border-color 0.1s ease;
    }

    .btn-secondary:hover {
      background: #e5e7eb;
      color: #020617;
      border-color: #e5e7eb;
    }

    .ticket-result {
      margin-top: 12px;
      font-size: 0.9rem;
    }

    .ticket-card {
      border-radius: 16px;
      border: 1px dashed rgba(148, 163, 184, 0.6);
      padding: 12px 14px;
      background: radial-gradient(circle at top left, #020617, #020617);
    }

    .ticket-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
      font-weight: 600;
      color: #e5e7eb;
    }

    .ticket-status-ok {
      color: #4ade80;
    }

    /* INFO Y SOPORTE */
    .info-list {
      margin: 8px 0;
      padding-left: 18px;
      font-size: 0.88rem;
      color: var(--texto-secundario);
    }

    .info-list li {
      margin-bottom: 3px;
    }

    footer {
      text-align: center;
      font-size: 0.75rem;
      color: #6b7280;
      padding: 16px;
      border-top: 1px solid rgba(31, 41, 55, 0.85);
      background: #020617;
    }

    a {
      color: #60a5fa;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .hero {
        grid-template-columns: 1fr;
        padding: 20px 18px 18px;
      }
      .hero-img-wrapper {
        order: -1;
      }
      header h1 {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>RIFA IPHONE 17 PRO MAX</h1>
    <p>Un solo ganador ¬∑ Boletos limitados ¬∑ Rifa gestionada de forma manual</p>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div>
        <div class="badge">
          <span>üéüÔ∏è</span> RIFA OFICIAL ¬∑ SOLO 200 BOLETOS
        </div>
        <h2>iPhone 17 Pro Max ¬∑ Azul profundo ¬∑ Sellado</h2>
        <p class="hero-subtitle">
          Participa con solo <strong>10 USD</strong> por boleto y ll√©vate un
          iPhone nuevo, sellado, listo para estrenar. Premio √∫nico y
          participaci√≥n limitada.
        </p>

        <p class="price-highlight">
          üíµ <strong>Precio por boleto:</strong> <span>10 USD</span>
        </p>

        <ul class="details-list">
          <li>Solo <strong>200 boletos</strong> disponibles.</li>
          <li>La rifa inicia el <strong>d√≠a 3</strong> y termina el
            <strong>d√≠a 15</strong>.</li>
          <li>El ganador se define con la
            <strong>loter√≠a de la noche</strong> y se anunciar√° tambi√©n por redes sociales oficiales.
          </li>
          <li>Encargado de la rifa:
            <strong>Daniel Estrada</strong>.
          </li>
        </ul>

        <div class="cta-row">
          <a href="#tickets" class="btn-primary">
            Ver n√∫meros disponibles
          </a>
          <span class="cta-note">
            Elige tu n√∫mero, realiza el pago y env√≠a tu captura por WhatsApp para registrar tu boleto.
          </span>
        </div>
      </div>

      <div class="hero-img-wrapper">
        <div class="hero-img">
          <!-- IMPORTANTE: el nombre del archivo debe coincidir con el que subiste al repositorio -->
          <img
            src="iphone17pro-azul.jpg"
            alt="iPhone 17 Pro Max azul profundo"
          />
        </div>
      </div>
    </section>

    <!-- DETALLES DEL PREMIO -->
    <section class="card">
      <h3><span>üì¶</span> Detalles del premio</h3>
      <p>
        <strong>Marca:</strong> Apple<br />
        <strong>Modelo:</strong> iPhone 17 Pro Max<br />
        <strong>Color:</strong> Azul profundo<br />
        <strong>Estado:</strong> Nuevo, sellado, sin activar.
      </p>
      <p>
        Este iPhone 17 Pro Max combina dise√±o elegante, c√°mara profesional
        y bater√≠a de larga duraci√≥n. Un tel√©fono de √∫ltima generaci√≥n
        pensado para destacar en cada detalle.
      </p>
    </section>

    <!-- C√ìMO PARTICIPAR -->
    <section class="card">
      <h3><span>‚úÖ</span> C√≥mo participar</h3>
      <ul>
        <li>Revisa los n√∫meros disponibles en la tabla de boletos.</li>
        <li>Elige tu n√∫mero favorito (ejemplo: <strong>43</strong>).</li>
        <li>
          Realiza el pago de tu boleto por
          <strong>Zelle, Cash App o PayPal</strong>.
        </li>
        <li>
          Completa tus datos en el formulario y env√≠a tu comprobante por
          WhatsApp.
        </li>
        <li>
          Una vez confirmado el pago, tu boleto se marcar√° como
          <strong>VENDIDO</strong> y podr√°s verificarlo en el verificador
          de boletos.
        </li>
      </ul>

      <div class="good-luck">
        üçÄ <strong>Mensaje especial:</strong> Gracias por confiar en esta rifa.
        Deseamos que tu n√∫mero sea el ganador. Participa con fe, responsabilidad y mucha suerte.
      </div>
    </section>

    <!-- INFORMACI√ìN IMPORTANTE / POL√çTICAS -->
    <section class="card">
      <h3><span>‚ÑπÔ∏è</span> Informaci√≥n importante</h3>
      <ul class="info-list">
        <li>Los pagos y confirmaciones se gestionan de forma manual por el equipo organizador.</li>
        <li>Es obligatorio enviar el comprobante de pago por WhatsApp para registrar el boleto.</li>
        <li>En caso de cualquier duda, puedes comunicarte al WhatsApp o correo de soporte indicado al final de la p√°gina.</li>
        <li>La participaci√≥n en la rifa implica la aceptaci√≥n de estas condiciones y pol√≠ticas.</li>
      </ul>
    </section>

    <!-- M√âTODOS DE PAGO -->
    <section class="card">
      <h3><span>üí≥</span> M√©todos de pago</h3>

      <p><strong>Zelle</strong> <span class="tag">TRANSFERENCIA</span><br />
        Titular: Jarlin Infante<br />
        Tel√©fono: +1 (302) 893-6554
      </p>

      <p><strong>Cash App</strong> <span class="tag">ENLACE DIRECTO</span><br />
        Link:
        <a href="https://cash.app/$wellington0" target="_blank">
          https://cash.app/$wellington0
        </a>
      </p>

      <p><strong>PayPal</strong> <span class="tag">ENLACE DIRECTO</span><br />
        Link:
        <a href="https://www.paypal.me/AssanCruz636" target="_blank">
          https://www.paypal.me/AssanCruz636
        </a>
      </p>

      <p class="small-note">
        ‚û§ Recuerda escribir correctamente tu nombre y n√∫mero de WhatsApp al
        enviar tu comprobante de pago.
      </p>
    </section>

    <!-- BOLETOS -->
    <section class="card" id="tickets">
      <h3><span>üéüÔ∏è</span> N√∫meros de boletos (1‚Äì200)</h3>
      <p>
        Aqu√≠ puedes ver qu√© n√∫meros est√°n libres y cu√°les ya fueron vendidos.
        Haz clic en tu n√∫mero favorito para seleccionarlo.
      </p>

      <div class="progress-wrapper">
        <div class="progress-bar">
          <div id="progress-fill" class="progress-fill"></div>
        </div>
        <div id="progress-text" class="progress-text">
          Boletos vendidos: 0 de 200 (0.0%)
        </div>
      </div>

      <div class="ticket-legend">
        <div class="legend-item">
          <span class="legend-box"></span> Disponible
        </div>
        <div class="legend-item">
          <span class="legend-box selected"></span> N√∫mero seleccionado
        </div>
        <div class="legend-item">
          <span class="legend-box sold"></span> Vendido
        </div>
      </div>

      <div id="tickets-container" class="tickets-grid"></div>
    </section>

    <!-- DATOS DEL PARTICIPANTE -->
    <section class="card" id="datos">
      <h3><span>üìù</span> Datos del participante</h3>
      <p>
        Completa tus datos para registrar tu boleto. Despu√©s de hacer tu pago,
        usa este formulario para enviar tu informaci√≥n y comprobante por
        WhatsApp.
      </p>

      <form id="buyer-form">
        <div class="fields-grid">
          <div class="field">
            <label for="buyer-name">Nombre y apellido *</label>
            <input id="buyer-name" type="text" required />
          </div>
          <div class="field">
            <label for="buyer-phone">Tel√©fono (WhatsApp) *</label>
            <input id="buyer-phone" type="tel" required />
          </div>
          <div class="field">
            <label for="buyer-email">Correo electr√≥nico *</label>
            <input id="buyer-email" type="email" required />
          </div>
          <div class="field">
            <label for="buyer-ticket">N√∫mero de boleto elegido *</label>
            <input id="buyer-ticket" type="number" min="1" max="200" required />
          </div>
        </div>

        <p class="small-note">
          ‚û§ Si ya seleccionaste un n√∫mero en la tabla, aqu√≠ se rellenar√°
          autom√°ticamente. Puedes cambiarlo si lo deseas.
        </p>

        <button type="submit" class="btn-primary">
          Enviar datos por WhatsApp
        </button>

        <p class="small-note">
          Al enviar tus datos y tu comprobante, tu boleto pasa a revisi√≥n.
          Cuando el pago se verifique, aparecer√° como <strong>Pago verificado</strong>
          en el verificador de boletos.
        </p>
      </form>
    </section>

    <!-- VERIFICADOR DE BOLETOS -->
    <section class="card">
      <h3><span>üîç</span> Verificador de boletos</h3>
      <p>
        Ingresa tu <strong>n√∫mero de tel√©fono</strong> o tu
        <strong># de boleto</strong> para ver el estado de tu participaci√≥n.
      </p>

      <form class="verifier-form" id="verifier-form">
        <input
          id="verify-input"
          type="text"
          placeholder="Ej: +1 302 893 6554 o 43"
        />
        <button type="submit" class="btn-secondary">Buscar</button>
      </form>

      <div id="verify-result" class="ticket-result"></div>
    </section>

    <!-- INFORMACI√ìN Y SOPORTE -->
    <section class="card">
      <h3><span>üí¨</span> Informaci√≥n y soporte</h3>
      <p>
        Para cualquier duda sobre la rifa, verificaci√≥n de pagos o soporte,
        puedes comunicarte directamente con el equipo organizador.
      </p>
      <p>
        <strong>Correo electr√≥nico:</strong>
        <a href="mailto:rifaoficiales@outlook.com">rifaoficiales@outlook.com</a><br />
        <strong>WhatsApp (Jarlin Infante):</strong>
        <a href="https://wa.me/13028936554" target="_blank">+1 (302) 893-6554</a>
      </p>
      <p class="small-note">
        El responsable de la rifa es <strong>Daniel Estrada</strong>.<br />
        Esta p√°gina es informativa; los pagos y la verificaci√≥n de boletos se realizan de forma manual por el equipo encargado.
      </p>
    </section>
  </main>

  <footer>
    Rifa iPhone 17 Pro Max ¬∑ P√°gina informativa ¬∑ Manejo manual de boletos. Soporte:
    rifaoficiales@outlook.com ¬∑ WhatsApp: +1 (302) 893-6554
  </footer>

  <script>
    const TOTAL_TICKETS = 200;

    // üßæ Aqu√≠ ir√°n los boletos con pago verificado.
    // Ejemplo de estructura de un comprador:
    // {
    //   ticket: 25,
    //   name: "Juan P√©rez",
    //   phone: "+1 302 000 0000",
    //   email: "correo@ejemplo.com",
    //   method: "PayPal",
    //   verifiedAt: "2025-11-30 14:34:15"
    // }
    const buyers = [
  {
    name: "Cliente 1",
    phone: "+1 (302) 893-6554",
    email: "cliente1@correo.com",
    ticket: 2,
    method: "Zelle",
    verifiedAt: "2025-11-30"
  }
      {
    name: "Cliente 1",
    phone: "+1 (302) 893-6554",
    email: "cliente1@correo.com",
    ticket: 26,
    method: "Zelle",
    verifiedAt: "2025-11-30"
  }
];

    const ticketsContainer = document.getElementById("tickets-container");
    const progressFill = document.getElementById("progress-fill");
    const progressText = document.getElementById("progress-text");
    const buyerForm = document.getElementById("buyer-form");
    const buyerNameInput = document.getElementById("buyer-name");
    const buyerPhoneInput = document.getElementById("buyer-phone");
    const buyerEmailInput = document.getElementById("buyer-email");
    const buyerTicketInput = document.getElementById("buyer-ticket");
    const verifierForm = document.getElementById("verifier-form");
    const verifyInput = document.getElementById("verify-input");
    const verifyResult = document.getElementById("verify-result");

    let selectedTicket = null;

    function getSoldTicketNumbers() {
      return buyers.map((b) => b.ticket);
    }

    function renderTickets() {
      ticketsContainer.innerHTML = "";
      const soldNumbers = getSoldTicketNumbers();

      for (let i = 1; i <= TOTAL_TICKETS; i++) {
        const btn = document.createElement("button");
        btn.classList.add("ticket");
        btn.textContent = i;

        if (soldNumbers.includes(i)) {
          btn.classList.add("sold");
          btn.disabled = true;
        }

        btn.addEventListener("click", () => {
          if (btn.classList.contains("sold")) return;

          document
            .querySelectorAll(".ticket.selected")
            .forEach((el) => el.classList.remove("selected"));
          btn.classList.add("selected");
          selectedTicket = i;
          buyerTicketInput.value = i;

          alert(
            "Has seleccionado el n√∫mero " +
              i +
              ".\n\nDespu√©s de hacer tu pago, completa tus datos y env√≠a tu comprobante por WhatsApp.\n\nüçÄ ¬°Mucha suerte! Que este n√∫mero sea el ganador."
          );
        });

        ticketsContainer.appendChild(btn);
      }
    }

    function updateProgress() {
      const vendidos = getSoldTicketNumbers().length;
      const porcentaje = (vendidos / TOTAL_TICKETS) * 100;
      progressFill.style.width = porcentaje + "%";
      progressText.textContent =
        "Boletos vendidos: " +
        vendidos +
        " de " +
        TOTAL_TICKETS +
        " (" +
        porcentaje.toFixed(1) +
        "%)";
    }

    // ‚úÖ Enviar datos por WhatsApp
    buyerForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const name = buyerNameInput.value.trim();
      const phone = buyerPhoneInput.value.trim();
      const email = buyerEmailInput.value.trim();
      const ticketNumber = buyerTicketInput.value.trim();

      if (!name || !phone || !email || !ticketNumber) {
        alert("Por favor completa todos los campos obligatorios.");
        return;
      }

      const message =
        "üì± RIFA IPHONE 17 PRO MAX\n\n" +
        "Quiero registrar mi boleto.\n\n" +
        "üë§ Nombre y apellido: " +
        name +
        "\n" +
        "üìû Tel√©fono (WhatsApp): " +
        phone +
        "\n" +
        "üìß Correo: " +
        email +
        "\n" +
        "üéüÔ∏è N√∫mero de boleto: " +
        ticketNumber +
        "\n\n" +
        "Adjunto mi comprobante de pago.\n\n" +
        "üçÄ Gracias, quedo pendiente de la confirmaci√≥n de mi n√∫mero.";

      // N√∫mero de WhatsApp del encargado (solo n√∫meros, sin + ni espacios)
      const whatsappNumber = "13028936554"; // +1 302 893 6554

      const url =
        "https://wa.me/" +
        whatsappNumber +
        "?text=" +
        encodeURIComponent(message);

      window.open(url, "_blank");
    });

    // üîç Verificador de boletos
    verifierForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const query = verifyInput.value.trim();

      if (!query) {
        verifyResult.textContent =
          "Por favor ingresa un n√∫mero de tel√©fono o n√∫mero de boleto.";
        return;
      }

      let found = null;

      // Si son solo n√∫meros, asumimos n√∫mero de boleto
      if (/^\d+$/.test(query)) {
        const num = parseInt(query, 10);
        found = buyers.find((b) => b.ticket === num);
      } else {
        // Buscamos por tel√©fono (contiene)
        const qLower = query.toLowerCase();
        found = buyers.find((b) =>
          (b.phone || "").toLowerCase().includes(qLower)
        );
      }

      if (!found) {
        verifyResult.innerHTML =
          '<p class="ticket-result">' +
          "No encontramos un boleto verificado con esos datos.<br>" +
          "Si ya realizaste tu pago, espera a que el equipo confirme tu comprobante. üôè" +
          "</p>";
        return;
      }

      const statusHtml =
        '<div class="ticket-card">' +
        '<div class="ticket-card-header">' +
        '<span class="ticket-status-ok">‚úî Pago verificado</span>' +
        "<span>üéüÔ∏è Boleto #" +
        found.ticket +
        "</span>" +
        "</div>" +
        "<p><strong>Nombre:</strong> " +
        (found.name || "No registrado") +
        "<br>" +
        "<strong>Tel√©fono:</strong> " +
        (found.phone || "No registrado") +
        "<br>" +
        "<strong>Correo:</strong> " +
        (found.email || "No registrado") +
        "<br>" +
        "<strong>M√©todo de pago:</strong> " +
        (found.method || "No especificado") +
        "<br>" +
        "<strong>Fecha de verificaci√≥n:</strong> " +
        (found.verifiedAt || "Pendiente") +
        "</p>" +
        '<p class="small-note">üçÄ ¬°Tu n√∫mero est√° participando en la rifa del iPhone 17 Pro Max!</p>' +
        "</div>";

      verifyResult.innerHTML = statusHtml;
    });

    renderTickets();
    updateProgress();
  </script>
</body>
</html>
